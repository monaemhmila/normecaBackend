"use strict";(self.webpackChunkNORMECA_angular=self.webpackChunkNORMECA_angular||[]).push([[2466],{2466:(J,p,s)=>{s.r(p),s.d(p,{CategoriesModule:()=>x});var g=s(6814),d=s(6223),u=s(4190),h=s(4841),e=s(5879),C=s(9136),f=s(586),_=s(3566);function b(o,l){if(1&o&&(e.TgZ(0,"div",83),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage3," ")}}function Z(o,l){1&o&&(e.TgZ(0,"tr")(1,"td",84)(2,"h5",85),e._uU(3,"No data found"),e.qZA()()())}function v(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",49)(8,"a",86),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.openEditModal(n))}),e._UZ(9,"i",87),e.qZA(),e.TgZ(10,"a",88),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.setSelectedCategoryId(n._id))}),e._UZ(11,"i",89),e.qZA()()()}if(2&o){const t=l.$implicit,a=l.index;e.xp6(2),e.hij(" ",a+1," "),e.xp6(2),e.Oqu(t.Libelle),e.xp6(2),e.Oqu(t.description)}}function T(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",91),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.moveToPage(i.currentPage-2))})("keydown.enter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.moveToPage(i.currentPage-2))}),e.TgZ(1,"a",92),e._uU(2," ... "),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("hidden",1===t.currentPage)}}function y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",91),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.moveToPage(i.currentPage+2))})("keydown.enter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.moveToPage(i.currentPage+2))}),e.TgZ(1,"a",92),e._uU(2," ... "),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("hidden",t.currentPage>=t.pageNumberArray[t.pageNumberArray.length-2]||t.totalData<t.serialNumberArray[t.serialNumberArray.length-1])}}function A(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",58)(2,"a",60),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.moveToPage(n))})("keydown.enter",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.moveToPage(n))}),e._uU(3),e.qZA()(),e.YNc(4,T,3,1,"li",90),e.YNc(5,y,3,1,"li",90),e.BQk()}if(2&o){const t=l.$implicit,a=l.index,i=e.oxw();e.xp6(1),e.ekj("active",t===i.currentPage),e.Q6J("ngClass",i.pageNumberArray[i.currentPage-2]>t&&1!==t&&i.pageNumberArray.length>6||i.pageNumberArray[i.currentPage]<t&&1!==t&&i.pageNumberArray.length>6&&i.pageNumberArray.length!==t?"hide-page-no":"show-page-no"),e.xp6(2),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",0===a&&i.pageNumberArray.length>6&&i.currentPage>2),e.xp6(1),e.Q6J("ngIf",a===i.pageNumberArray.length-2&&i.pageNumberArray.length>6)}}function M(o,l){if(1&o&&(e.TgZ(0,"div",83),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage2," ")}}function k(o,l){if(1&o&&(e.TgZ(0,"div",83),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.successMessage," ")}}const m=function(o){return{disabled:o}},c=function(){return{standalone:!0}},U=[{path:"",component:(()=>{class o{constructor(t,a){this.data=t,this.appService=a,this.Libelle="",this.description="",this.searchDataValue="",this.editLibelle="",this.editDescription="",this.successMessage="",this.successMessage2="",this.successMessage3="",this.selectedCategoryId=null,this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.filter=!1}ngOnInit(){this.getTableData(),this.GetCategories()}openFilter(){this.filter=!this.filter}setSelectedCategoryId(t){this.selectedCategoryId=t}GetCategories(){this.appService.getCategories()}openEditModal(t){this.selectedCategoryId=t._id,this.editLibelle=t.Libelle,this.editDescription=t.description}editCategory(){this.selectedCategoryId&&this.appService.updateCategory(this.selectedCategoryId,{Libelle:this.editLibelle,description:this.editDescription}).subscribe(a=>{console.log("Category updated successfully:",a),this.getTableData(),this.resetEditForm(),this.selectedCategoryId=null,this.successMessage="Mise \xe0 jour r\xe9ussie !",setTimeout(()=>{this.successMessage=""},1e3)},a=>{console.error("Error updating category:",a)})}resetEditForm(){this.editLibelle="",this.editDescription=""}getTableData(){this.lstBoard=[],this.serialNumberArray=[],this.appService.getCategories().subscribe(t=>{this.totalData=t.length,t.map((a,i)=>{i>=this.skip&&i+1<=this.limit&&this.lstBoard.push({_id:a._id,description:a.description,Libelle:a.Libelle,createdAt:a.createdAt,updatedAt:a.updatedAt,__v:a.__v})}),this.dataSource=new h.r4(this.lstBoard),this.calculateTotalPages(this.totalData,this.pageSize)},t=>{console.error("Error fetching categories:",t)})}deleteCategory(){this.selectedCategoryId&&this.appService.deleteCategory(this.selectedCategoryId).subscribe(()=>{console.log("Category deleted successfully"),this.getTableData(),this.selectedCategoryId=null,this.successMessage3="Suppression r\xe9ussie !",setTimeout(()=>{this.successMessage3=""},1e3)},t=>{console.error("Error deleting category:",t)})}resetForm(){this.Libelle="",this.description=""}addCategory(){this.appService.addCategory(this.Libelle,this.description).subscribe(t=>{console.log("Category added successfully:",t),this.getTableData(),this.resetForm(),this.successMessage2="Ajouter avec succe\xe9s !",setTimeout(()=>{this.successMessage2=""},3e3)},t=>{console.error("Error adding category:",t)})}sortData(t){const a=this.lstBoard.slice();this.lstBoard=t.active&&""!==t.direction?a.sort((i,n)=>(i[t.active]<n[t.active]?-1:1)*("asc"===t.direction?1:-1)):a}searchData(t){this.dataSource.filter=t.trim().toLowerCase(),this.lstBoard=this.dataSource.filteredData}getMoreData(t){"next"==t?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData()):"previous"==t&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData())}moveToPage(t){this.currentPage=t,this.skip=this.pageSelection[t-1].skip,this.limit=this.pageSelection[t-1].limit,t>this.currentPage?this.pageIndex=t-1:t<this.currentPage&&(this.pageIndex=t+1),this.getTableData()}changePageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}calculateTotalPages(t,a){this.pageNumberArray=[],this.totalPages=t/a,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(let i=1;i<=this.totalPages;i++){const n=a*i,r=n-a;this.pageNumberArray.push(i),this.pageSelection.push({skip:r,limit:n})}}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(C.u),e.Y36(f.z))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],decls:156,vars:31,consts:[[1,"page-wrapper"],[1,"content","container-fluid"],["class","alert alert-success",4,"ngIf"],[1,"page-header"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"col-auto"],["href","javascript:void()","data-bs-toggle","modal","data-bs-target","#add-category",1,"btn","add-button","me-2"],[1,"fas","fa-plus"],["href","javascript:void(0);","id","filter_search",1,"btn","filter-btn",3,"click","keydown.enter"],[1,"fas","fa-filter"],["id","filter_inputs",1,"card","filter-card",3,"ngClass"],[1,"card-body","pb-0"],["action","#","method","post"],[1,"row","filter-row"],[1,"col-sm-6","col-md-3"],[1,"form-group"],["for","categories"],["type","text",1,"form-control"],[1,"cal-icon"],["for","from-date"],["type","text",1,"form-control","datetimepicker"],["for","to-date"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table_header"],[1,"dataTables_length"],["for","entries"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"dataTables_filter"],["for","search"],[1,"table-scroll"],["matSort","",1,"table","table-center","table-hover","mb-0","datatable",3,"matSortChange"],["mat-sort-header","id"],["mat-sort-header","libelle"],["mat-sort-header","description"],[1,"text-end"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click","keydown.enter"],["href","javascript:void(0);",1,"page-link",3,"click","keydown.enter"],["id","add-category",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"close"],[1,"modal-body"],[3,"submit"],["for","category-name"],["type","text","placeholder","Enter Category Libelle",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[2,"margin-bottom","10px"],["type","text","placeholder","Enter Category Description",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"mt-4"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary","btn-block"],["id","edit-category",1,"modal","fade","custom-modal"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["id","delete_category","role","dialog",1,"modal","custom-modal","fade"],[1,"form-header"],[1,"modal-btn","delete-action"],[1,"col-6"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-primary","continue-btn",3,"click"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-primary","cancel-btn"],[1,"alert","alert-success"],["colspan","4"],[2,"text-align","center"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#edit-category",1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"far","fa-edit"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#delete_category",1,"btn","btn-sm","btn-danger",3,"click"],[1,"far","fa-trash-alt"],["class","page-item","tabindex","0",3,"hidden","click","keydown.enter",4,"ngIf"],["tabindex","0",1,"page-item",3,"hidden","click","keydown.enter"],["href","javascript:void(0);",1,"page-link"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,b,2,1,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),e._uU(7,"Categories"),e.qZA(),e.TgZ(8,"ul",7)(9,"li",8)(10,"a",9),e._uU(11,"Home"),e.qZA()(),e.TgZ(12,"li",10),e._uU(13,"Categories"),e.qZA()()(),e.TgZ(14,"div",11)(15,"a",12),e._UZ(16,"i",13),e.qZA(),e.TgZ(17,"a",14),e.NdJ("click",function(){return i.openFilter()})("keydown.enter",function(){return i.openFilter()}),e._UZ(18,"i",15),e.qZA()()()(),e.TgZ(19,"div",16)(20,"div",17)(21,"form",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"label",22),e._uU(26,"Add Categories"),e.qZA(),e._UZ(27,"input",23),e.qZA()(),e.TgZ(28,"div",20)(29,"div",21)(30,"div",24)(31,"label",25),e._uU(32,"From Date"),e.qZA(),e._UZ(33,"input",26),e.qZA()()(),e.TgZ(34,"div",20)(35,"div",21)(36,"div",24)(37,"label",27),e._uU(38,"To Date"),e.qZA(),e._UZ(39,"input",26),e.qZA()()(),e.TgZ(40,"div",20)(41,"div",21)(42,"button",28),e._uU(43,"Submit"),e.qZA()()()()()()(),e.TgZ(44,"div",29)(45,"div",30)(46,"div",31)(47,"div",32)(48,"div",33)(49,"div",34)(50,"div",35)(51,"label",36),e._uU(52," Show "),e.qZA(),e.TgZ(53,"select",37),e.NdJ("ngModelChange",function(r){return i.pageSize=r})("ngModelChange",function(){return i.changePageSize()}),e.TgZ(54,"option",38),e._uU(55,"10"),e.qZA(),e.TgZ(56,"option",39),e._uU(57,"25"),e.qZA(),e.TgZ(58,"option",40),e._uU(59,"50"),e.qZA(),e.TgZ(60,"option",41),e._uU(61,"100"),e.qZA()(),e.TgZ(62,"label",36),e._uU(63,"Entries"),e.qZA()(),e.TgZ(64,"div",42)(65,"label",43),e._uU(66," Search: "),e.qZA(),e.TgZ(67,"input",37),e.NdJ("ngModelChange",function(r){return i.searchDataValue=r})("ngModelChange",function(){return i.searchData(i.searchDataValue)}),e.qZA()()(),e.TgZ(68,"div",44)(69,"table",45),e.NdJ("matSortChange",function(r){return i.sortData(r)}),e.TgZ(70,"thead")(71,"tr")(72,"th",46),e._uU(73,"S.No"),e.qZA(),e.TgZ(74,"th",47),e._uU(75,"Libelle"),e.qZA(),e.TgZ(76,"th",48),e._uU(77,"Description"),e.qZA(),e.TgZ(78,"th",49),e._uU(79,"Actions"),e.qZA()(),e.YNc(80,Z,4,0,"tr",50),e.qZA(),e.TgZ(81,"tbody"),e.YNc(82,v,12,3,"tr",51),e.qZA()()(),e.TgZ(83,"div",52)(84,"div",53)(85,"div",54),e._uU(86),e.qZA()(),e.TgZ(87,"div",55)(88,"div",56)(89,"ul",57)(90,"li",58)(91,"a",59),e.NdJ("click",function(){return i.getMoreData("previous")})("keydown.enter",function(){return i.getMoreData("previous")}),e._uU(92,"Previous"),e.qZA()(),e.YNc(93,A,6,6,"ng-container",51),e.TgZ(94,"li",58)(95,"a",60),e.NdJ("click",function(){return i.getMoreData("next")})("keydown.enter",function(){return i.getMoreData("next")}),e._uU(96,"Next "),e.qZA()()()()()()()()()()()()(),e.TgZ(97,"div",61)(98,"div",62)(99,"div",63)(100,"div",64)(101,"h4",65),e._uU(102,"Add Category"),e.qZA(),e.TgZ(103,"button",66)(104,"span"),e._uU(105,"\xd7"),e.qZA()()(),e.TgZ(106,"div",67),e.YNc(107,M,2,1,"div",2),e.TgZ(108,"form",68),e.NdJ("submit",function(){return i.addCategory()}),e.TgZ(109,"div",21)(110,"label",69),e._uU(111,"Category Name"),e.qZA(),e.TgZ(112,"input",70),e.NdJ("ngModelChange",function(r){return i.Libelle=r}),e.qZA(),e._UZ(113,"div",71),e.TgZ(114,"input",72),e.NdJ("ngModelChange",function(r){return i.description=r}),e.qZA()(),e.TgZ(115,"div",73)(116,"button",74),e._uU(117,"Submit"),e.qZA()()()()()()(),e.TgZ(118,"div",75)(119,"div",62)(120,"div",63)(121,"div",64)(122,"h4",65),e._uU(123,"Edit Category"),e.qZA(),e.TgZ(124,"button",66)(125,"span"),e._uU(126,"\xd7"),e.qZA()()(),e.TgZ(127,"div",67),e.YNc(128,k,2,1,"div",2),e.TgZ(129,"form",68),e.NdJ("submit",function(){return i.editCategory()}),e.TgZ(130,"div",21)(131,"label",69),e._uU(132,"Category Name"),e.qZA(),e.TgZ(133,"input",76),e.NdJ("ngModelChange",function(r){return i.editLibelle=r}),e.qZA(),e._UZ(134,"div",71),e.TgZ(135,"input",76),e.NdJ("ngModelChange",function(r){return i.editDescription=r}),e.qZA()(),e.TgZ(136,"div",73)(137,"button",74),e._uU(138,"Submit"),e.qZA()()()()()()(),e.TgZ(139,"div",77)(140,"div",62)(141,"div",63)(142,"div",67)(143,"div",78)(144,"h3"),e._uU(145,"Delete"),e.qZA(),e.TgZ(146,"p"),e._uU(147,"Are you sure you want to delete?"),e.qZA()(),e.TgZ(148,"div",79)(149,"div",29)(150,"div",80)(151,"a",81),e.NdJ("click",function(){return i.deleteCategory()}),e._uU(152,"Delete"),e.qZA()(),e.TgZ(153,"div",80)(154,"a",82),e._uU(155,"Cancel"),e.qZA()()()()()()()()),2&a&&(e.xp6(2),e.Q6J("ngIf",i.successMessage3),e.xp6(8),e.Q6J("routerLink","/admin/dashboard"),e.xp6(9),e.Q6J("ngClass",!0===i.filter?"filter-show":""),e.xp6(34),e.Q6J("ngModel",i.pageSize),e.xp6(14),e.Q6J("ngModel",i.searchDataValue),e.xp6(13),e.Q6J("ngIf",i.dataSource&&0===i.dataSource.data.length),e.xp6(2),e.Q6J("ngForOf",i.lstBoard),e.xp6(4),e.lnq(" Showing ",i.serialNumberArray[0]," to ",i.serialNumberArray[i.serialNumberArray.length-1]," of ",i.totalData," entries "),e.xp6(4),e.Q6J("ngClass",e.VKq(23,m,1===i.currentPage)),e.xp6(3),e.Q6J("ngForOf",i.pageNumberArray),e.xp6(1),e.Q6J("ngClass",e.VKq(25,m,i.currentPage===i.pageNumberArray[i.pageNumberArray.length-1]||0===i.lstBoard.length)),e.xp6(13),e.Q6J("ngIf",i.successMessage2),e.xp6(5),e.Q6J("ngModel",i.Libelle)("ngModelOptions",e.DdM(27,c)),e.xp6(2),e.Q6J("ngModel",i.description)("ngModelOptions",e.DdM(28,c)),e.xp6(14),e.Q6J("ngIf",i.successMessage),e.xp6(5),e.Q6J("ngModel",i.editLibelle)("ngModelOptions",e.DdM(29,c)),e.xp6(2),e.Q6J("ngModel",i.editDescription)("ngModelOptions",e.DdM(30,c)))},dependencies:[g.mk,g.sg,g.O5,u.rH,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.On,d.F,_.YE,_.nU]})}return o})()}];let q=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(U),u.Bz]})}return o})();var N=s(45);let x=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[g.ez,q,N.m,d.u5]})}return o})()}}]);