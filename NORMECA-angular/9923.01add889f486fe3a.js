"use strict";(self.webpackChunkNORMECA_angular=self.webpackChunkNORMECA_angular||[]).push([[9923],{9923:(G,u,o)=>{o.r(u),o.d(u,{CategoriesModule:()=>S});var c=o(177),d=o(9417),p=o(1188),_=o(416),e=o(7705),b=o(7738),C=o(529),m=o(2042);function f(s,l){if(1&s&&(e.j41(0,"div",83),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.SpI(" ",t.successMessage3," ")}}function v(s,l){1&s&&(e.j41(0,"tr")(1,"td",84)(2,"h5",85),e.EFF(3,"No data found"),e.k0s()()())}function k(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td",49)(8,"a",86),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.openEditModal(n))}),e.nrm(9,"i",87),e.k0s(),e.j41(10,"a",88),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.setSelectedCategoryId(n._id))}),e.nrm(11,"i",89),e.k0s()()()}if(2&s){const t=l.$implicit,a=l.index;e.R7$(2),e.SpI(" ",a+1," "),e.R7$(2),e.JRh(t.Libelle),e.R7$(2),e.JRh(t.description)}}function y(s,l){if(1&s){const t=e.RV6();e.j41(0,"li",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.moveToPage(i.currentPage-2))})("keydown.enter",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.moveToPage(i.currentPage-2))}),e.j41(1,"a",92),e.EFF(2," ... "),e.k0s()()}if(2&s){const t=e.XpG(2);e.Y8G("hidden",1===t.currentPage)}}function F(s,l){if(1&s){const t=e.RV6();e.j41(0,"li",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.moveToPage(i.currentPage+2))})("keydown.enter",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.moveToPage(i.currentPage+2))}),e.j41(1,"a",92),e.EFF(2," ... "),e.k0s()()}if(2&s){const t=e.XpG(2);e.Y8G("hidden",t.currentPage>=t.pageNumberArray[t.pageNumberArray.length-2]||t.totalData<t.serialNumberArray[t.serialNumberArray.length-1])}}function j(s,l){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"li",58)(2,"a",60),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.moveToPage(n))})("keydown.enter",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.moveToPage(n))}),e.EFF(3),e.k0s()(),e.DNE(4,y,3,1,"li",90),e.DNE(5,F,3,1,"li",90),e.bVm()}if(2&s){const t=l.$implicit,a=l.index,i=e.XpG();e.R7$(1),e.AVh("active",t===i.currentPage),e.Y8G("ngClass",i.pageNumberArray[i.currentPage-2]>t&&1!==t&&i.pageNumberArray.length>6||i.pageNumberArray[i.currentPage]<t&&1!==t&&i.pageNumberArray.length>6&&i.pageNumberArray.length!==t?"hide-page-no":"show-page-no"),e.R7$(2),e.SpI(" ",t," "),e.R7$(1),e.Y8G("ngIf",0===a&&i.pageNumberArray.length>6&&i.currentPage>2),e.R7$(1),e.Y8G("ngIf",a===i.pageNumberArray.length-2&&i.pageNumberArray.length>6)}}function E(s,l){if(1&s&&(e.j41(0,"div",83),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.SpI(" ",t.successMessage2," ")}}function M(s,l){if(1&s&&(e.j41(0,"div",83),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.SpI(" ",t.successMessage," ")}}const h=function(s){return{disabled:s}},g=function(){return{standalone:!0}},T=[{path:"",component:(()=>{class s{constructor(t,a){this.data=t,this.appService=a,this.Libelle="",this.description="",this.searchDataValue="",this.editLibelle="",this.editDescription="",this.successMessage="",this.successMessage2="",this.successMessage3="",this.selectedCategoryId=null,this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.filter=!1}ngOnInit(){this.getTableData(),this.GetCategories()}openFilter(){this.filter=!this.filter}setSelectedCategoryId(t){this.selectedCategoryId=t}GetCategories(){this.appService.getCategories()}openEditModal(t){this.selectedCategoryId=t._id,this.editLibelle=t.Libelle,this.editDescription=t.description}editCategory(){this.selectedCategoryId&&this.appService.updateCategory(this.selectedCategoryId,{Libelle:this.editLibelle,description:this.editDescription}).subscribe(a=>{console.log("Category updated successfully:",a),this.getTableData(),this.resetEditForm(),this.selectedCategoryId=null,this.successMessage="Mise \xe0 jour r\xe9ussie !",setTimeout(()=>{this.successMessage=""},1e3)},a=>{console.error("Error updating category:",a)})}resetEditForm(){this.editLibelle="",this.editDescription=""}getTableData(){this.lstBoard=[],this.serialNumberArray=[],this.appService.getCategories().subscribe(t=>{this.totalData=t.length,t.map((a,i)=>{i>=this.skip&&i+1<=this.limit&&this.lstBoard.push({_id:a._id,description:a.description,Libelle:a.Libelle,createdAt:a.createdAt,updatedAt:a.updatedAt,__v:a.__v})}),this.dataSource=new _.Nf(this.lstBoard),this.calculateTotalPages(this.totalData,this.pageSize)},t=>{console.error("Error fetching categories:",t)})}deleteCategory(){this.selectedCategoryId&&this.appService.deleteCategory(this.selectedCategoryId).subscribe(()=>{console.log("Category deleted successfully"),this.getTableData(),this.selectedCategoryId=null,this.successMessage3="Suppression r\xe9ussie !",setTimeout(()=>{this.successMessage3=""},1e3)},t=>{console.error("Error deleting category:",t)})}resetForm(){this.Libelle="",this.description=""}addCategory(){this.appService.addCategory(this.Libelle,this.description).subscribe(t=>{console.log("Category added successfully:",t),this.getTableData(),this.resetForm(),this.successMessage2="Ajouter avec succe\xe9s !",setTimeout(()=>{this.successMessage2=""},3e3)},t=>{console.error("Error adding category:",t)})}sortData(t){const a=this.lstBoard.slice();this.lstBoard=t.active&&""!==t.direction?a.sort((i,n)=>(i[t.active]<n[t.active]?-1:1)*("asc"===t.direction?1:-1)):a}searchData(t){this.dataSource.filter=t.trim().toLowerCase(),this.lstBoard=this.dataSource.filteredData}getMoreData(t){"next"==t?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData()):"previous"==t&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData())}moveToPage(t){this.currentPage=t,this.skip=this.pageSelection[t-1].skip,this.limit=this.pageSelection[t-1].limit,t>this.currentPage?this.pageIndex=t-1:t<this.currentPage&&(this.pageIndex=t+1),this.getTableData()}changePageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}calculateTotalPages(t,a){this.pageNumberArray=[],this.totalPages=t/a,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(let i=1;i<=this.totalPages;i++){const n=a*i,r=n-a;this.pageNumberArray.push(i),this.pageSelection.push({skip:r,limit:n})}}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(b.L),e.rXU(C.d))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-categories"]],decls:156,vars:31,consts:[[1,"page-wrapper"],[1,"content","container-fluid"],["class","alert alert-success",4,"ngIf"],[1,"page-header"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"col-auto"],["href","javascript:void()","data-bs-toggle","modal","data-bs-target","#add-category",1,"btn","add-button","me-2"],[1,"fas","fa-plus"],["href","javascript:void(0);","id","filter_search",1,"btn","filter-btn",3,"click","keydown.enter"],[1,"fas","fa-filter"],["id","filter_inputs",1,"card","filter-card",3,"ngClass"],[1,"card-body","pb-0"],["action","#","method","post"],[1,"row","filter-row"],[1,"col-sm-6","col-md-3"],[1,"form-group"],["for","categories"],["type","text",1,"form-control"],[1,"cal-icon"],["for","from-date"],["type","text",1,"form-control","datetimepicker"],["for","to-date"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table_header"],[1,"dataTables_length"],["for","entries"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"dataTables_filter"],["for","search"],[1,"table-scroll"],["matSort","",1,"table","table-center","table-hover","mb-0","datatable",3,"matSortChange"],["mat-sort-header","id"],["mat-sort-header","libelle"],["mat-sort-header","description"],[1,"text-end"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click","keydown.enter"],["href","javascript:void(0);",1,"page-link",3,"click","keydown.enter"],["id","add-category",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"close"],[1,"modal-body"],[3,"submit"],["for","category-name"],["type","text","placeholder","Enter Category Libelle",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[2,"margin-bottom","10px"],["type","text","placeholder","Enter Category Description",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"mt-4"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary","btn-block"],["id","edit-category",1,"modal","fade","custom-modal"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["id","delete_category","role","dialog",1,"modal","custom-modal","fade"],[1,"form-header"],[1,"modal-btn","delete-action"],[1,"col-6"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-primary","continue-btn",3,"click"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-primary","cancel-btn"],[1,"alert","alert-success"],["colspan","4"],[2,"text-align","center"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#edit-category",1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"far","fa-edit"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#delete_category",1,"btn","btn-sm","btn-danger",3,"click"],[1,"far","fa-trash-alt"],["class","page-item","tabindex","0",3,"hidden","click","keydown.enter",4,"ngIf"],["tabindex","0",1,"page-item",3,"hidden","click","keydown.enter"],["href","javascript:void(0);",1,"page-link"]],template:function(a,i){1&a&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,f,2,1,"div",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),e.EFF(7,"Categories"),e.k0s(),e.j41(8,"ul",7)(9,"li",8)(10,"a",9),e.EFF(11,"Home"),e.k0s()(),e.j41(12,"li",10),e.EFF(13,"Categories"),e.k0s()()(),e.j41(14,"div",11)(15,"a",12),e.nrm(16,"i",13),e.k0s(),e.j41(17,"a",14),e.bIt("click",function(){return i.openFilter()})("keydown.enter",function(){return i.openFilter()}),e.nrm(18,"i",15),e.k0s()()()(),e.j41(19,"div",16)(20,"div",17)(21,"form",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"label",22),e.EFF(26,"Add Categories"),e.k0s(),e.nrm(27,"input",23),e.k0s()(),e.j41(28,"div",20)(29,"div",21)(30,"div",24)(31,"label",25),e.EFF(32,"From Date"),e.k0s(),e.nrm(33,"input",26),e.k0s()()(),e.j41(34,"div",20)(35,"div",21)(36,"div",24)(37,"label",27),e.EFF(38,"To Date"),e.k0s(),e.nrm(39,"input",26),e.k0s()()(),e.j41(40,"div",20)(41,"div",21)(42,"button",28),e.EFF(43,"Submit"),e.k0s()()()()()()(),e.j41(44,"div",29)(45,"div",30)(46,"div",31)(47,"div",32)(48,"div",33)(49,"div",34)(50,"div",35)(51,"label",36),e.EFF(52," Show "),e.k0s(),e.j41(53,"select",37),e.bIt("ngModelChange",function(r){return i.pageSize=r})("ngModelChange",function(){return i.changePageSize()}),e.j41(54,"option",38),e.EFF(55,"10"),e.k0s(),e.j41(56,"option",39),e.EFF(57,"25"),e.k0s(),e.j41(58,"option",40),e.EFF(59,"50"),e.k0s(),e.j41(60,"option",41),e.EFF(61,"100"),e.k0s()(),e.j41(62,"label",36),e.EFF(63,"Entries"),e.k0s()(),e.j41(64,"div",42)(65,"label",43),e.EFF(66," Search: "),e.k0s(),e.j41(67,"input",37),e.bIt("ngModelChange",function(r){return i.searchDataValue=r})("ngModelChange",function(){return i.searchData(i.searchDataValue)}),e.k0s()()(),e.j41(68,"div",44)(69,"table",45),e.bIt("matSortChange",function(r){return i.sortData(r)}),e.j41(70,"thead")(71,"tr")(72,"th",46),e.EFF(73,"S.No"),e.k0s(),e.j41(74,"th",47),e.EFF(75,"Libelle"),e.k0s(),e.j41(76,"th",48),e.EFF(77,"Description"),e.k0s(),e.j41(78,"th",49),e.EFF(79,"Actions"),e.k0s()(),e.DNE(80,v,4,0,"tr",50),e.k0s(),e.j41(81,"tbody"),e.DNE(82,k,12,3,"tr",51),e.k0s()()(),e.j41(83,"div",52)(84,"div",53)(85,"div",54),e.EFF(86),e.k0s()(),e.j41(87,"div",55)(88,"div",56)(89,"ul",57)(90,"li",58)(91,"a",59),e.bIt("click",function(){return i.getMoreData("previous")})("keydown.enter",function(){return i.getMoreData("previous")}),e.EFF(92,"Previous"),e.k0s()(),e.DNE(93,j,6,6,"ng-container",51),e.j41(94,"li",58)(95,"a",60),e.bIt("click",function(){return i.getMoreData("next")})("keydown.enter",function(){return i.getMoreData("next")}),e.EFF(96,"Next "),e.k0s()()()()()()()()()()()()(),e.j41(97,"div",61)(98,"div",62)(99,"div",63)(100,"div",64)(101,"h4",65),e.EFF(102,"Add Category"),e.k0s(),e.j41(103,"button",66)(104,"span"),e.EFF(105,"\xd7"),e.k0s()()(),e.j41(106,"div",67),e.DNE(107,E,2,1,"div",2),e.j41(108,"form",68),e.bIt("submit",function(){return i.addCategory()}),e.j41(109,"div",21)(110,"label",69),e.EFF(111,"Category Name"),e.k0s(),e.j41(112,"input",70),e.bIt("ngModelChange",function(r){return i.Libelle=r}),e.k0s(),e.nrm(113,"div",71),e.j41(114,"input",72),e.bIt("ngModelChange",function(r){return i.description=r}),e.k0s()(),e.j41(115,"div",73)(116,"button",74),e.EFF(117,"Submit"),e.k0s()()()()()()(),e.j41(118,"div",75)(119,"div",62)(120,"div",63)(121,"div",64)(122,"h4",65),e.EFF(123,"Edit Category"),e.k0s(),e.j41(124,"button",66)(125,"span"),e.EFF(126,"\xd7"),e.k0s()()(),e.j41(127,"div",67),e.DNE(128,M,2,1,"div",2),e.j41(129,"form",68),e.bIt("submit",function(){return i.editCategory()}),e.j41(130,"div",21)(131,"label",69),e.EFF(132,"Category Name"),e.k0s(),e.j41(133,"input",76),e.bIt("ngModelChange",function(r){return i.editLibelle=r}),e.k0s(),e.nrm(134,"div",71),e.j41(135,"input",76),e.bIt("ngModelChange",function(r){return i.editDescription=r}),e.k0s()(),e.j41(136,"div",73)(137,"button",74),e.EFF(138,"Submit"),e.k0s()()()()()()(),e.j41(139,"div",77)(140,"div",62)(141,"div",63)(142,"div",67)(143,"div",78)(144,"h3"),e.EFF(145,"Delete"),e.k0s(),e.j41(146,"p"),e.EFF(147,"Are you sure you want to delete?"),e.k0s()(),e.j41(148,"div",79)(149,"div",29)(150,"div",80)(151,"a",81),e.bIt("click",function(){return i.deleteCategory()}),e.EFF(152,"Delete"),e.k0s()(),e.j41(153,"div",80)(154,"a",82),e.EFF(155,"Cancel"),e.k0s()()()()()()()()),2&a&&(e.R7$(2),e.Y8G("ngIf",i.successMessage3),e.R7$(8),e.Y8G("routerLink","/admin/dashboard"),e.R7$(9),e.Y8G("ngClass",!0===i.filter?"filter-show":""),e.R7$(34),e.Y8G("ngModel",i.pageSize),e.R7$(14),e.Y8G("ngModel",i.searchDataValue),e.R7$(13),e.Y8G("ngIf",i.dataSource&&0===i.dataSource.data.length),e.R7$(2),e.Y8G("ngForOf",i.lstBoard),e.R7$(4),e.E5c(" Showing ",i.serialNumberArray[0]," to ",i.serialNumberArray[i.serialNumberArray.length-1]," of ",i.totalData," entries "),e.R7$(4),e.Y8G("ngClass",e.eq3(23,h,1===i.currentPage)),e.R7$(3),e.Y8G("ngForOf",i.pageNumberArray),e.R7$(1),e.Y8G("ngClass",e.eq3(25,h,i.currentPage===i.pageNumberArray[i.pageNumberArray.length-1]||0===i.lstBoard.length)),e.R7$(13),e.Y8G("ngIf",i.successMessage2),e.R7$(5),e.Y8G("ngModel",i.Libelle)("ngModelOptions",e.lJ4(27,g)),e.R7$(2),e.Y8G("ngModel",i.description)("ngModelOptions",e.lJ4(28,g)),e.R7$(14),e.Y8G("ngIf",i.successMessage),e.R7$(5),e.Y8G("ngModel",i.editLibelle)("ngModelOptions",e.lJ4(29,g)),e.R7$(2),e.Y8G("ngModel",i.editDescription)("ngModelOptions",e.lJ4(30,g)))},dependencies:[c.YU,c.Sq,c.bT,p.Wk,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.vS,d.cV,m.B4,m.aE]})}}return s})()}];let I=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(T),p.iI]})}}return s})();var D=o(9688);let S=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[c.MD,I,D.G,d.YN]})}}return s})()}}]);